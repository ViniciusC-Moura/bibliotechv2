@startuml

package "models" {

  class Bibliotecario {
    - cpf : str
    - senha : str
    + getters/setters()
    + __str__() : str
  }

  class Usuario {
    - cpf : str
    - matricula : str
    - nome : str
    - email : str
    - telefone : str
    - senha : str
    + getters/setters()
    + __str__() : str
  }

  class Autor {
    - id : int
    - nome : str
    + getters/setters()
    + __str__() : str
  }

  class Livro {
    - codigo : int
    - nome : str
    + getters/setters()
    + __str__() : str
  }

  class Autoria {
    - id_autor : int
    - codigo_livro : int
    + getters/setters()
    + __str__() : str
  }

  class Exemplar {
    - id : int
    - disponibilidade : bool
    - codigo_livro : int
    + getters/setters()
    + __str__() : str
  }

  class Emprestimo {
    - id : int
    - dt_emprestimo : datetime
    - dt_prazo : datetime
    - dt_devolucao : datetime
    - cpf_usuario : str
    - id_exemplar : int
    + getters/setters()
    + __str__() : str
  }

  class Multa {
    - id : int
    - cpf_usuario : str
    - valor : float
    - descricao : str
    + getters/setters()
    + __str__() : str
  }

  abstract class DAO {
    + inserir(obj)
    + listar() : list
    + listar_id(id)
    + atualizar(obj)
    + excluir(obj)
  }

  class BibliotecarioDAO {
    + inserir(b:Bibliotecario)
    + listar() : list<Bibliotecario>
    + listar_id(cpf:str) : Bibliotecario
    + atualizar(b:Bibliotecario)
    + excluir(b:Bibliotecario)
  }

  class UsuarioDAO {
    + inserir(u:Usuario)
    + listar() : list<Usuario>
    + listar_id(cpf:str) : Usuario
    + atualizar(u:Usuario)
    + excluir(u:Usuario)
  }

  class AutorDAO {
    + inserir(a:Autor)
    + listar() : list<Autor>
    + listar_id(id:int) : Autor
    + atualizar(a:Autor)
    + excluir(a:Autor)
  }

  class LivroDAO {
    + inserir(l:Livro)
    + listar() : list<Livro>
    + listar_id(codigo:int) : Livro
    + atualizar(l:Livro)
    + excluir(l:Livro)
  }

  class AutoriaDAO {
    + inserir(a:Autoria)
    + listar() : list<Autoria>
    + listar_id(chave:tuple) : Autoria
    + atualizar(a:Autoria)
    + excluir(a:Autoria)
  }

  class ExemplarDAO {
    + inserir(e:Exemplar)
    + listar() : list<Exemplar>
    + listar_id(id:int) : Exemplar
    + atualizar(e:Exemplar)
    + excluir(e:Exemplar)
  }

  class EmprestimoDAO {
    + inserir(e:Emprestimo)
    + listar() : list<Emprestimo>
    + listar_id(id:int) : Emprestimo
    + atualizar(e:Emprestimo)
    + excluir(e:Emprestimo)
  }

  class MultaDAO {
    + inserir(m:Multa)
    + listar() : list<Multa>
    + listar_id(id:int) : Multa
    + atualizar(m:Multa)
    + excluir(m:Multa)
  }

  BibliotecarioDAO --|> DAO
  UsuarioDAO --|> DAO
  AutorDAO --|> DAO
  LivroDAO --|> DAO
  AutoriaDAO --|> DAO
  ExemplarDAO --|> DAO
  EmprestimoDAO --|> DAO
  MultaDAO --|> DAO
}

'==========================
' RELAÇÕES ENTRE ENTIDADES
'==========================

BibliotecarioDAO "1" -- "0..*" Bibliotecario
UsuarioDAO "1" -- "0..*" Usuario
AutorDAO "1" -- "0..*" Autor
LivroDAO "1" -- "0..*" Livro
AutoriaDAO "1" -- "0..*" Autoria
ExemplarDAO "1" -- "0..*" Exemplar
EmprestimoDAO "1" -- "0..*" Emprestimo
MultaDAO "1" -- "0..*" Multa

Emprestimo --> Usuario : cpf_usuario
Emprestimo --> Exemplar : id_exemplar

Exemplar --> Livro : codigo_livro

Autoria --> Autor : id_autor
Autoria --> Livro : codigo_livro

Multa --> Usuario : cpf_usuario

@enduml
